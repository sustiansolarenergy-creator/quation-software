<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solar Bill Pro - Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root { --solar-orange: #f39c12; --solar-dark: #2c3e50; }
        body { background-color: #f4f7f6; font-family: 'Segoe UI', sans-serif; }
        .sidebar { height: 100vh; background: var(--solar-dark); color: white; position: fixed; width: 250px; }
        .main-content { margin-left: 250px; padding: 20px; transition: 0.3s; }
        .nav-link { color: white; margin: 10px 0; cursor: pointer; }
        .nav-link:hover { background: var(--solar-orange); border-radius: 5px; }
        .page { display: none; }
        .active-page { display: block; }
        .login-container { max-width: 400px; margin: 100px auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 0 20px rgba(0,0,0,0.1); }
        @media (max-width: 768px) { .sidebar { width: 100%; height: auto; position: relative; } .main-content { margin-left: 0; } }
    </style>
</head>
<body>

<div id="loginPage" class="page active-page">
    <div class="login-container">
        <h3 class="text-center text-warning">Solar Login</h3>
        <div class="mb-3">
            <label>Username</label>
            <input type="text" id="username" class="form-control" value="admin">
        </div>
        <div class="mb-3">
            <label>Password</label>
            <input type="password" id="password" class="form-control" value="123">
        </div>
        <button class="btn btn-warning w-100" onclick="handleLogin()">Login</button>
    </div>
</div>

<div id="mainApp" class="page">
    <div class="sidebar d-flex flex-column p-3">
        <h4>Solar Bill Pro</h4>
        <hr>
        <a class="nav-link p-2" onclick="showPage('dashboard')">🏠 Dashboard</a>
        <a class="nav-link p-2" onclick="showPage('quotations')">📄 Quotation List</a>
        <a class="nav-link p-2" onclick="showPage('settings')">⚙️ Settings</a>
        <a class="nav-link p-2 mt-auto text-danger" onclick="location.reload()">🚪 Logout</a>
    </div>

    <div class="main-content">
        <div id="dashboard" class="sub-page active-page">
            <h2>Dashboard</h2>
            <div class="row mt-4">
                <div class="col-md-4"><div class="card p-3 bg-primary text-white"><h5>Total Quotes</h5><h3>24</h3></div></div>
                <div class="col-md-4"><div class="card p-3 bg-success text-white"><h5>Approved</h5><h3>18</h3></div></div>
                <div class="col-md-4"><div class="card p-3 bg-warning text-white"><h5>Pending</h5><h3>6</h3></div></div>
            </div>
        </div>

        <div id="quotations" class="sub-page" style="display:none;">
            <div class="d-flex justify-content-between">
                <h2>Quotation List</h2>
                <button class="btn btn-success" onclick="addQuote()">+ New Quote</button>
            </div>
            <table class="table table-hover mt-3 bg-white shadow-sm">
                <thead class="table-dark">
                    <tr>
                        <th>ID</th>
                        <th>Customer</th>
                        <th>KW Size</th>
                        <th>Amount</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="quoteTable">
                    <tr>
                        <td>#101</td>
                        <td>Arun Kumar</td>
                        <td>5KW</td>
                        <td>₹3,50,000</td>
                        <td>
                            <button class="btn btn-sm btn-info" onclick="downloadPDF('Arun Kumar', '3,50,000')">📥 PDF</button>
                            <button class="btn btn-sm btn-warning" onclick="alert('Edit Mode')">✏️</button>
                            <button class="btn btn-sm btn-danger" onclick="this.parentElement.parentElement.remove()">🗑️</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="settings" class="sub-page" style="display:none;">
            <h2>Company Settings</h2>
            <div class="card p-4 mt-3 col-md-6">
                <div class="mb-3">
                    <label>Company Logo</label>
                    <input type="file" class="form-control" onchange="previewLogo(event)">
                    <img id="logoPreview" class="mt-2" style="max-height: 80px;">
                </div>
                <div class="mb-3">
                    <label>Company Name</label>
                    <input type="text" class="form-control" placeholder="ABC Solar Solutions">
                </div>
                <div class="mb-3">
                    <label>GST Number</label>
                    <input type="text" class="form-control" placeholder="33AAAAA0000A1Z5">
                </div>
                <button class="btn btn-primary">Save Settings</button>
            </div>
        </div>
    </div>
</div>

<script>
    // Logic to Switch Pages
    function showPage(pageId) {
        document.querySelectorAll('.sub-page').forEach(p => p.style.display = 'none');
        document.getElementById(pageId).style.display = 'block';
    }

    function handleLogin() {
        document.getElementById('loginPage').classList.remove('active-page');
        document.getElementById('mainApp').classList.add('active-page');
    }

    function previewLogo(event) {
        const reader = new FileReader();
        reader.onload = function(){
            document.getElementById('logoPreview').src = reader.result;
        }
        reader.readAsDataURL(event.target.files[0]);
    }

    // 5. PDF DOWNLOAD OPTION
    function downloadPDF(name, price) {
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFontSize(20);
        doc.text("SOLAR QUOTATION", 70, 20);
        doc.setFontSize(12);
        doc.text(`Customer Name: ${name}`, 20, 40);
        doc.text(`Total Estimate: ₹${price}`, 20, 50);
        doc.text(`Status: Official Document`, 20, 60);
        doc.text(`--------------------------`, 20, 70);
        doc.text(`Thank you for choosing our solar service!`, 20, 80);
        doc.save(`${name}_Solar_Quote.pdf`);
    }
</script>

</body>
</html>